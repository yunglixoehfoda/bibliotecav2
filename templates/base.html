<!DOCTYPE html>
<html lang="pt-br">
<head>
    
    <meta charset="utf-8">
    <link rel="icon" href="/static/favicon.ico">
    <link rel="apple-touch-icon" href="/static/icon-180.png">
    <link rel="shortcut icon" href="/static/favicon.ico">
    <title>Acervo</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div id="page-loader" class="page-loader hidden">
      <div class="spinner"></div>
    </div>


    <!-- NAVBAR DESKTOP -->
    <nav class="navbar">
        <div class="nav-left">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 64 64" width="32" height="32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M4 8h24v48H4V8zm32 0h24v48H36V8z" stroke="currentColor" stroke-width="2" fill="none"/>
  <path d="M4 8l28 24-28 24" stroke="currentColor" stroke-width="2" fill="none"/>
</svg>
 <span></span>
            </div>
        </div>

        <div class="nav-links">
            <a href="/" class="nav-btn">Home</a>

            {% if not session.role %}
                <a href="/login" class="nav-btn">Login</a>
            {% endif %}

            {% if session.role == "admin" %}
                <a href="/livros" class="nav-btn">Livros</a>
                <a href="/livro/novo" class="nav-btn destaque">Novo livro</a>
                <a href="/backup/livros" class="nav-btn backup" download>Backup</a>
                <a href="/logout" class="nav-btn logout">Sair</a>
            {% endif %}
            <button class="theme-toggle">
              <span class="icon" id="theme-icon">
                <svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true">
  <!-- sol -->
  <circle class="sun" cx="12" cy="12" r="5" />
  <!-- raios -->
  <g class="sun-rays">
    <line x1="12" y1="1" x2="12" y2="3"/>
    <line x1="12" y1="21" x2="12" y2="23"/>
    <line x1="4.2" y1="4.2" x2="5.6" y2="5.6"/>
    <line x1="18.4" y1="18.4" x2="19.8" y2="19.8"/>
    <line x1="1" y1="12" x2="3" y2="12"/>
    <line x1="21" y1="12" x2="23" y2="12"/>
    <line x1="4.2" y1="19.8" x2="5.6" y2="18.4"/>
    <line x1="18.4" y1="5.6" x2="19.8" y2="4.2"/>
  </g>

  <!-- lua -->
  <path class="moon"
    d="M21 12.8A9 9 0 1 1 11.2 3
       7 7 0 0 0 21 12.8z" />
</svg>

                </svg>
            </span>
        </button>

        </div>
    </nav>

    <!-- CONTEÚDO -->
    <main class="page-content">
        {% block content %}{% endblock %}
    </main>

    <!-- NAVBAR MOBILE (EMBAIXO) -->
    <nav class="mobile-nav">
        <a href="/" class="mobile-item">
            <span class="icon">
                <svg viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8"
                    stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 10.5L12 3l9 7.5"/>
                  <path d="M5 10v10h14V10"/>
                </svg>

            </span>
            <span class="label"></span>
        </a>
        <button class="theme-toggle">
              <span class="icon" id="theme-icon">
                <svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true">
  <!-- sol -->
  <circle class="sun" cx="12" cy="12" r="5" />
  <!-- raios -->
  <g class="sun-rays">
    <line x1="12" y1="1" x2="12" y2="3"/>
    <line x1="12" y1="21" x2="12" y2="23"/>
    <line x1="4.2" y1="4.2" x2="5.6" y2="5.6"/>
    <line x1="18.4" y1="18.4" x2="19.8" y2="19.8"/>
    <line x1="1" y1="12" x2="3" y2="12"/>
    <line x1="21" y1="12" x2="23" y2="12"/>
    <line x1="4.2" y1="19.8" x2="5.6" y2="18.4"/>
    <line x1="18.4" y1="5.6" x2="19.8" y2="4.2"/>
  </g>

  <!-- lua -->
  <path class="moon"
    d="M21 12.8A9 9 0 1 1 11.2 3
       7 7 0 0 0 21 12.8z" />
</svg>

                </svg>
            </span>
        </button>
        



        {% if session.role == "admin" %}
        <a href="/livros" class="mobile-item">
            <span class="icon">
                <svg viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8"
                    stroke-linecap="round" stroke-linejoin="round">
                  <path d="M4 4h12a4 4 0 0 1 4 4v12"/>
                  <path d="M4 4v16a4 4 0 0 0 4 4h12"/>
                </svg>

            </span>
            <span class="label"></span>
        </a>
        <div class="logo">
                <svg class="logo-icon" viewBox="0 0 64 64" width="32" height="32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
  <path d="M4 8h24v48H4V8zm32 0h24v48H36V8z" stroke="currentColor" stroke-width="2" fill="none"/>
  <path d="M4 8l28 24-28 24" stroke="currentColor" stroke-width="2" fill="none"/>
</svg>
 <span></span>
            </div>

        <a href="/livro/novo" class="mobile-item add">
            <span class="icon">
                <svg viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8"
                    stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="9"/>
                  <path d="M12 8v8M8 12h8"/>
                </svg>

            </span>
        </a>

        <a href="/backup/livros" class="mobile-item" download>
            <span class="icon">
                <svg viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8"
                    stroke-linecap="round" stroke-linejoin="round">
                      <path d="M12 3v12"/>
                      <path d="M8 11l4 4 4-4"/>
                  <rect x="4" y="17" width="16" height="4" rx="2"/>
                </svg>

            </span>
        </a>

        {% endif %}

        {% if session.role %}
        <a href="/logout" class="mobile-item">
            <span class="icon">
                <svg viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8"
                    stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                      <path d="M16 17l5-5-5-5"/>
                      <path d="M21 12H9"/>
                </svg>

            </span>
            <span class="label"></span>
        </a>
        {% else %}
        <a href="/login" class="mobile-item">
            <span class="icon">
                <svg class="icon" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                  <!-- cabeça -->
                  <circle cx="12" cy="8" r="4" />
                  <!-- corpo -->
                  <path d="M6 20c0-3.3 2.7-6 6-6s6 2.7 6 6" />
                </svg>

            </span>
            <span class="label"></span>
        </a>
        {% endif %}
    </nav>
    

</body>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const toggles = document.querySelectorAll(".theme-toggle");
  const root = document.documentElement;
  const loader = document.getElementById("page-loader");


  const savedTheme = localStorage.getItem("theme") || "dark";
  root.setAttribute("data-theme", savedTheme);

  toggles.forEach(btn => {
    btn.addEventListener("click", () => {
      const current = root.getAttribute("data-theme");
      const next = current === "light" ? "dark" : "light";

      root.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    
      
    });
  });

 

  if (loader) {
    document.querySelectorAll("a[href]").forEach(link => {
      link.addEventListener("click", () => {
        const href = link.getAttribute("href");

        if (
          !href ||
          href.startsWith("#") ||
          link.hasAttribute("download") ||
          link.target === "_blank" ||
          link.dataset.noload !== undefined
        ) return;

        
        if (href.includes("backup")) return;

        loader.classList.remove("hidden");
      });
    });

   
    window.addEventListener("pageshow", () => {
      loader.classList.add("hidden");
    });
  }
});
</script>



</html>
